<!DOCTYPE html>
<html lang="ja">

  <head prefix="og: http://ogp.me/ns# fb: http://ogp.me/ns/fb# website: http://ogp.me/ns/website#">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="食は、北海道の魅力であり課題でもある。だから、HBCはとことん掘り下げる。">
    <title>いっちゃんおいしいHBC｜HBC北海道放送</title>
    <meta property="og:title" content="いっちゃんおいしいHBC｜HBC北海道放送">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://www.hbc.co.jp/1ch-oishii/">
    <meta property="og:image" content="assets/img/ogp.jpg">
    <meta property="og:site_name" content="ＨＢＣ　北海道放送">
    <meta property="og:description" content="食は、北海道の魅力であり課題でもある。だから、HBCはとことん掘り下げる。" />
    <meta property="og:locale" content="ja_JP">
    <meta property="fb:app_id" content="182119349255083">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:site" content="@HBChokkaido">
    <link rel="icon" type="image/x-icon" href="https://www.hbc.co.jp/image/favicon.ico">
    <link rel="apple-touch-icon" sizes="180x180" href="https://www.hbc.co.jp/image/apple-touch-icon.png">
    <link rel="stylesheet" href="https://www.hbc.co.jp/css/top/g_menu.css">

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>

    <link rel="stylesheet" href="assets/css/style.min.css">

    <script>
      (function (d) {
        var config = {
            kitId: 'bko0uoc',
            scriptTimeout: 3000,
            async: true
          },
          h = d.documentElement,
          t = setTimeout(function () {
            h.className = h.className.replace(/\bwf-loading\b/g, "") + " wf-inactive";
          }, config.scriptTimeout),
          tk = d.createElement("script"),
          f = false,
          s = d.getElementsByTagName("script")[0],
          a;
        h.className += " wf-loading";
        tk.src = 'https://use.typekit.net/' + config.kitId + '.js';
        tk.async = true;
        tk.onload = tk.onreadystatechange = function () {
          a = this.readyState;
          if (f || a && a != "complete" && a != "loaded") return;
          f = true;
          clearTimeout(t);
          try {
            Typekit.load(config)
          } catch (e) {}
        };
        s.parentNode.insertBefore(tk, s)
      })(document);
    </script>

    <!-- Google Tag Manager -->
    <script>
      (function (w, d, s, l, i) {
        w[l] = w[l] || [];
        w[l].push({
          'gtm.start': new Date().getTime(),
          event: 'gtm.js'
        });
        var f = d.getElementsByTagName(s)[0],
          j = d.createElement(s),
          dl = l != 'dataLayer' ? '&l=' + l : '';
        j.async = true;
        j.src =
          'https://www.googletagmanager.com/gtm.js?id=' + i + dl;
        f.parentNode.insertBefore(j, f);
      })(window, document, 'script', 'dataLayer', 'GTM-5XPXCVX');
    </script>
    <!-- End Google Tag Manager -->
    <meta name="robots" content="noindex,nofollow">

  </head>

  <body>
    <!-- Google Tag Manager (noscript) -->
    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-5XPXCVX" height="0" width="0"
        style="display:none;visibility:hidden"></iframe></noscript>
    <!-- End Google Tag Manager (noscript) -->
    <nav>
      <script src="https://www.hbc.co.jp/java_scripts/g_menu_s.js"></script>
      <script src="https://www.hbc.co.jp/java_scripts/g_menu_script.js"></script>
    </nav>

    <main id="ichan" role="main">
      <div id="sound-button" class="sound-attention">
        <div class="sound-attention__overflow">
          <div class="sound-attention__container">
            <p class="sound-attention__explanation">動画が再生されます。<br>音声をオンにしてお楽しみください。</p>
            <button id="skip" class="sound-attention__skip"><img src="assets/img/sound-ui_skip.svg" alt="SKIP"></button>
            <sound-button>
              <div><img src="assets/img/sound-ui_heading.svg" alt="SOUND"></div>
              <button id="sound-on"><img src="assets/img/sound-ui_on.svg" alt="ON"></button>
              <span><img src="assets/img/sound-ui_slash.svg" alt="or"></span>
              <button id="sound-off"><img src="assets/img/sound-ui_off.svg" alt="OFF"></button>
            </sound-button>
          </div>
        </div>
      </div>
      <div id="opening" class="opening" style="display: none;">
        <div class="opening__overflow">
          <div class="opening__container">
            <div id="opening-video"></div>
          </div>
        </div>
      </div>
      <div class="kv">
        <div class="kv__container">
          <div class="logo">
            <img src="assets/img/kv_logo.webp" width="640" height="430" alt="いっちゃんおいしいHBC">
          </div>
          <div class="statement">
            <h1 class="statement__catch-copy">
              <img class="sm" src="assets/img/statement_catch-copy-sm.png" alt="食は、北海道の魅力であり課題でもある。だから、HBCはとことん掘り下げる。">
              <img class="lg" src="assets/img/statement_catch-copy-lg.png" alt="食は、北海道の魅力であり課題でもある。だから、HBCはとことん掘り下げる。">
            </h1>
            <p class="statement__body-copy">
              <span>温暖化のこと。物価高のこと。輸出のこと。</span>
              <span>世界で起こることが、<wbr>北海道の食につながっている。</span>
              <span>大きな視点でニュースを<wbr>語るのもだいじだけれど、</span>
              <span>半径10メートルで起きる話題こそ伝えたい。</span>
              <span>地元で愛されているのに、<wbr>人材不足に苦しむ店主がいる。</span>
              <span>子ども食堂で “居場所” をつくる人がいる。</span>
              <span>まだない食材の開発に挑む研究者がいる。</span>
              <span>DXと加工技術で販路を世界に広げる農家がいる。</span>
              <span>動物愛護と“食べていく”の<wbr>バランスに悩む人がいる。</span>
              <span>地元素材を調理して<wbr>価値と雇用を生む工場がある。</span>
              <span>そう、北海道は<wbr>「つくる」と「食べる」でできている。</span>
              <span>消費してるだけの「消費者」なんて、<wbr>きっといない。</span>
              <span>いろんな立場の人が集えば、<wbr>学び合いが生まれる。</span>
              <span>地元メディアHBCがつくるのは、<wbr>学びコミュニティ。</span>
              <span>「メディア」の本来の意味である<wbr>「媒介」となって、</span>
              <span>わたしたちは、<wbr>食の北海道ブランドを<wbr>バックアップする。</span>
              <span>食べるも、つくるも、広めるも。</span>
              <span>北海道の食の未来に光を。</span>
            </p>
          </div>
        </div>
        <div class="visual">
          <div class="visual__comment">
            <img src="assets/img/start.png" alt="">
          </div>
          <img class="visual__image" src="assets/img/kv_main.webp" alt="">
        </div>
      </div>
    </main>
    <footer>
      <address>
        <script src="https://www.hbc.co.jp/java_scripts/copyright.js"></script>
      </address>
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/gsap@3.12.5/dist/gsap.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/gsap@3.12.5/dist/ScrollTrigger.min.js"></script>
    <script src="https://www.youtube.com/iframe_api"></script>

    <script>
      gsap.registerPlugin(ScrollTrigger);
      document.addEventListener("DOMContentLoaded", (event) => {
        openingControl();
        statementCatchCopyControl();
        let initialScrollDetected = false;
        window.addEventListener("scroll", () => {
          if (!initialScrollDetected) {
            initialScrollDetected = true;
            statementBodyCopyControl();
            visualCommentControl();
          }
        }, {
          once: true
        }); // イベントリ
      });

      let lastWidth = window.innerWidth;
      let lastHeight = window.innerHeight;
      window.addEventListener('resize', function () {
        // 現在のウィンドウサイズを取得
        let newWidth = window.innerWidth;
        let newHeight = window.innerHeight;

        // 幅または高さが変更されたかどうかをチェック
        if (newWidth !== lastWidth || newHeight !== lastHeight) {
          statementBodyCopyControl();
          visualCommentControl();
          lastWidth = newWidth;
          lastHeight = newHeight;
        }
      });

      function openingControl() {
        let player;
        let fadeOutTimer;
        const soundButtons = document.getElementById('sound-button');
        const soundOn = document.getElementById('sound-on');
        const soundOff = document.getElementById('sound-off');
        const skip = document.getElementById('skip');
        const openingContainer = document.getElementById('opening');
        const videoContainer = document.getElementById('opening-video');

        soundOn.addEventListener('click', function () {
          loadVideo(true);
        });
        soundOff.addEventListener('click', function () {
          loadVideo(false);
        });
        skip.addEventListener('click', function () {
          skipVideo();
        });

        function loadVideo(sound) {
          soundButtons.style.display = 'none';
          openingContainer.style.display = 'block';

          function getVideoIdByAspectRatio() {
            const aspectRatio = window.innerWidth / window.innerHeight;
            if (aspectRatio >= 16 / 9) {
              return 'EN4LQztoi3M?si=raAEQ0SZ6AsMuS3L';
            } else {
              return 'rnOEwOfxhKU?si=_LcapdVjVHDi6--o';
            }
          }
          const videoId = getVideoIdByAspectRatio();
          player = new YT.Player(videoContainer, {
            height: '100%',
            width: '100%',
            videoId: videoId,
            playerVars: {
              autoplay: 1,
              controls: 0,
              rel: 0,
              showinfo: 0,
              modestbranding: 1,
              loop: 0,
              //end: 17,
              mute: sound ? 0 : 1,
            },
            events: {
              'onReady': onPlayerReady,
              'onStateChange': onPlayerStateChange
            }
          });
        }

        function onPlayerReady(event) {
          event.target.playVideo();
        }

        function onPlayerStateChange(event) {
          if (event.data === YT.PlayerState.PLAYING) {
            const openingElements = document.querySelectorAll('.opening');
            openingElements.forEach(function (element) {
              element.style.pointerEvents = 'none';
            });
            const duration = player.getDuration();
            const fadeOutDelay = (duration - 1.75) > 0 ? (duration - 1.75) * 1000 : 0;
            if (!fadeOutTimer) {
              fadeOutTimer = setTimeout(hiddenVideo, fadeOutDelay);
            }
          }
        }

        function hiddenVideo() {
          const timeline = gsap.timeline();
          timeline.to('.opening__overflow', {
              width: 0,
              duration: 1.4,
              ease: 'power4.out'
            }).to('.opening', {
              width: 0,
              duration: 1.1,
              ease: 'power4.out'
            }, '-=1.1')
            .to('opening', {
              display: 'none'
            })
            .to('.kv__container', {
              autoAlpha: 1,
              y: 0,
              duration: 0.8
            }, '-=0.2')
        }

        function skipVideo() {
          const timeline = gsap.timeline();
          timeline.to('#sound-button', {
              width: 0,
              duration: 1.2,
              ease: 'power4.out'
            })
            .to('.kv__container', {
              autoAlpha: 1,
              y: 0,
              duration: 0.8
            }, '-=0.2')
        }
      }

      function statementCatchCopyControl() {
        const target = '.statement__catch-copy';
        gsap.to(target, {
          scrollTrigger: {
            trigger: target,
            start: 'center 60%',
            end: 'bottom top',
            onEnter: () => gsap.to(target, {
              autoAlpha: 1,
            }),
            onEnterBack: () => gsap.to(target, {
              autoAlpha: 1,
            }),
            onLeaveBack: () => gsap.to(target, {
              autoAlpha: 0,
            }),
          }
        })
      }

      function getStartValue() {
        return window.innerWidth > window.innerHeight ? 'top 55%' : 'top 70%';
      }

      function statementBodyCopyControl() {
        ScrollTrigger.getAll().forEach(st => st.kill());
        ScrollTrigger.refresh();
        const target = gsap.utils.toArray('.statement__body-copy > span');
        target.forEach(target => {
          gsap.to(target, {
            scrollTrigger: {
              trigger: target,
              start: getStartValue(),
              end: 'bottom top',
              onEnter: () => gsap.to(target, {
                autoAlpha: 1,
              }),
              onEnterBack: () => gsap.to(target, {
                autoAlpha: 1,
              }),
              onLeaveBack: () => gsap.to(target, {
                autoAlpha: 0,
              }),
            }
          })
        });
      }

      function visualCommentControl() {
        const target = '.visual__comment';
        gsap.to(target, {
          autoAlpha: 1,
          y: 0,
          scrollTrigger: {
            trigger: '.kv',
            start: 'bottom bottom',
            toggleActions: 'play none none reverse'
          }
        })
      }
    </script>
  </body>

</html>